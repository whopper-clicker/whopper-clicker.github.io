<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <title>Capybara Coin Master</title>

  <!--http://www.html5rocks.com/en/mobile/mobifying/-->
  <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui=true"/>

  <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">

  <!-- force webkit on 360 -->
  <meta name="renderer" content="webkit"/>
  <meta name="force-rendering" content="webkit"/>
  <!-- force edge on IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="msapplication-tap-highlight" content="no">

  <!-- force full screen on some browser -->
  <meta name="full-screen" content="yes"/>
  <meta name="x5-fullscreen" content="true"/>
  <meta name="360-fullscreen" content="true"/>

  <!--fix fireball/issues/3568 -->
  <!--<meta name="browsermode" content="application">-->
  <meta name="x5-page-mode" content="app">

  <!--<link rel="apple-touch-icon" href=".png" />-->
  <!--<link rel="apple-touch-icon-precomposed" href=".png" />-->

  <link rel="stylesheet" type="text/css" href="style.02f4a.css"/>

</head>
<body>
	<!-- HTML Preloader (visible instantly) -->
  <div id="preload-screen" style="
      position: fixed;
      inset: 0;
      background: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: sans-serif;
      color: white;
      z-index: 9999;
  ">
      <img src="splash.87482.png" alt="Loading..." style="width: 120px; margin-bottom: 20px;">
      <div style="width: 200px; height: 8px; background: rgba(255,255,255,0.2); border-radius: 4px;">
          <div id="preload-progress" style="width: 0; height: 100%; background: #4cafef; border-radius: 4px; transition: width 0.2s;"></div>
      </div>
  <div id="preload-percent" style="margin-top: 8px; font-size: 14px;">0%</div>
  <div id="preload-tip" style="margin-top: 10px; font-size: 13px; min-height: 18px;"></div>
  </div>
  
  <div id="GameDiv" cc_exact_fit_screen="true">
      <div id="Cocos3dGameContainer">
        <canvas id="GameCanvas" oncontextmenu="event.preventDefault()" tabindex="99"></canvas>
      </div>
    </div>
  

<!-- Polyfills bundle. -->

<script src="src/polyfills.bundle.5adbf.js" charset="utf-8"> </script>


<!-- SystemJS support. -->
<script src="src/system.bundle.543e6.js" charset="utf-8"> </script>

<!-- Import map -->
<script src="src/import-map.a49f1.json" type="systemjs-importmap" charset="utf-8"> </script>

<script>
    System.import('./index.c2843.js').catch(function(err) { console.error(err); })
</script>

  
  <!-- Script to hide preloader when ready -->
  <script>
	window["GD_OPTIONS"] = {
			"gameId": "6a81e8ec192d4a48950e683e903d749c",
			"onEvent": function (event) {
				switch (event.name) {
					case "SDK_GAME_START":
						// advertisement done, resume game logic and unmute audio
						window.dispatchEvent(new CustomEvent("SDK_GAME_START"));
						break;
					case "SDK_GAME_PAUSE":
						// pause game logic / mute audio
						window.dispatchEvent(new CustomEvent("SDK_GAME_PAUSE"));
						break;
					case "SDK_GDPR_TRACKING":
						// this event is triggered when your user doesn't want to be tracked
						break;
					case "SDK_GDPR_TARGETING":
						// this event is triggered when your user doesn't want personalised targeting of ads and such
						break;
					case "SDK_REWARDED_WATCH_COMPLETE":
						// this event is triggered when your user completely watched rewarded ad
						window.dispatchEvent(new CustomEvent("SDK_REWARDED_WATCH_COMPLETE"));
						break;
				}
			},
		};
		(function (d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s);
			js.id = id;
			js.src = '/main.min.js';
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'gamedistribution-jssdk'));
		
    const progressBar = document.getElementById('preload-progress');
    const percentText = document.getElementById('preload-percent');
    const preloadScreen = document.getElementById('preload-screen');
    const tipText = document.getElementById('preload-tip');

    let simulatedProgress = 0;
    let interval = null;
    let finished = false;
    let tipInterval = null;
    let tips = [
		"Rallying the capybara crew…",
		"Feeding capybara snacks…",
		"Coaching rookie capybaras…",
		"Organizing capybara parade…",
		"Counting shiny coins…",
		"Training paws for faster flips…",
		"Polishing golden coins…",
		"Scheduling capybara nap breaks…",
		"Calculating tail wiggles per second…",
		"Filling the spa with warm water…",
		"Sharpening business acumen…",
		"Hiring capybara accountants…",
		"Stacking coins into tiny towers…",
		"Daydreaming about coin mountains…",
		"Balancing work and naptime…",
		"Fueling up with lettuce smoothies…",
		"Upgrading capybara lounge chairs…",
		"Practicing synchronized coin flips…"
	];
    // Shuffle tips array
    function shuffle(arr) {
      let a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
    let shuffledTips = shuffle(tips);
    let tipIndex = 0;

    function showNextTip() {
      if (!tipText) return;
      tipText.textContent = shuffledTips[tipIndex];
      tipIndex = (tipIndex + 1) % shuffledTips.length;
      // If we've looped, reshuffle
      if (tipIndex === 0) shuffledTips = shuffle(tips);
    }

    function startTipRotation() {
      if (tipInterval) return;
      showNextTip();
      tipInterval = setInterval(() => {
        if (finished) return;
        showNextTip();
      }, 2500);
    }

    function stopTipRotation() {
      if (tipInterval) {
        clearInterval(tipInterval);
        tipInterval = null;
      }
    }

    function setProgress(p) {
      if (progressBar) progressBar.style.width = p + "%";
      if (p < 99) {
        if (percentText) percentText.textContent = Math.floor(p) + "%";
        if (tipText) tipText.textContent = "";
        stopTipRotation();
      } else {
        if (percentText) percentText.textContent = "";
        startTipRotation();
      }
    }

    // Simulate progress over 5 seconds
    function activateLoadingAnimation() {
      interval = setInterval(() => {
        if (finished) return;
        simulatedProgress += 100 / (5 * 60); // 60 frames per second for 5 seconds
        if (simulatedProgress >= 99) simulatedProgress = 99;
        setProgress(simulatedProgress);
      }, 1000 / 60);
    }

    // Listen for custom event
    window.addEventListener("bootstraper-started", function() {
      finished = true;
      if (interval) clearInterval(interval);
      setProgress(100);
      stopTipRotation();
      if (preloadScreen) {
        preloadScreen.style.transition = "opacity 0.2s";
        preloadScreen.style.opacity = "0";
        setTimeout(() => preloadScreen.remove(), 200);
      }
    });

    activateLoadingAnimation();
  </script>
</body>
</html>
